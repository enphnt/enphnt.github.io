"use strict";(self.webpackChunknathan_phennel_website=self.webpackChunknathan_phennel_website||[]).push([[907],{3590:function(n,a,e){e.r(a),e.d(a,{Head:function(){return w},default:function(){return v}});var s=e(1151),t=e(7294),o=e(4854),l=e(5292),p=e.p+"static/ableton-my-vst-49a013cf519061c8230252e3c38941bf.gif",c=e.p+"static/build-bundle-47ce7a4853352b9ad313dc3790b18bb3.gif";function i(n){const a=Object.assign({h1:"h1",a:"a",span:"span",p:"p",h2:"h2",ul:"ul",li:"li",ol:"ol"},(0,s.ah)(),n.components);return t.createElement(t.Fragment,null,t.createElement(a.h1,{id:"do-it-yourself",style:{position:"relative"}},"Do it yourself",t.createElement(a.a,{href:"#do-it-yourself","aria-label":"do it yourself permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"I've written previously about ",t.createElement(o.Link,{"aria-label":"vst-plugins",to:"/blog/vst-plugins/",children:"how to build your own custom VSTs at a high-level"})," but I wanted to actually implement something so I dedicated a weekend to finding out how to do it. I'm going to share the resources I found and the process I followed so that you can build your own VST."),"\n",t.createElement(a.p,null,"I'll also share some of the pitfalls and surprises that I learned along the way like how Apple has their own proprietary format (Audio Units) and how this could be handled programmatically to support both VST and AU formats from a single codebase."),"\n",t.createElement(a.h1,{id:"vst-libs-and-tools",style:{position:"relative"}},"VST libs and tools",t.createElement(a.a,{href:"#vst-libs-and-tools","aria-label":"vst libs and tools permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"Here are some libraries and tools that are awesome for creating VSTs. Iâ€™ll tell you what they do and why they rock, but remember that there are many more out there."),"\n",t.createElement(a.h2,{id:"steinbergs-vst3-sdk",style:{position:"relative"}},t.createElement(a.a,{href:"https://github.com/steinbergmedia/vst3sdk"},"steinberg's VST3 SDK"),t.createElement(a.a,{href:"#steinbergs-vst3-sdk","aria-label":"steinbergs vst3 sdk permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"The official ",t.createElement("i",null,"proprietary")," SDK for developing VSTs from Steinberg, the company that created the VST format. It's written in C++ and is the most complete and maintained project I can find for VST development."),"\n",t.createElement(a.p,null,"Some concerns I have with Steinberg's offering include the fact that it's written in C++ (steep learning curve) and that it's not open source. If I ever decided to sell my plugins developed on I'd have to follow very strict guidelines on including the official VST logo and other branding requirements. No thanks."),"\n",t.createElement(a.h2,{id:"juce",style:{position:"relative"}},t.createElement(a.a,{href:"https://github.com/juce-framework/JUCE"},"JUCE"),t.createElement(a.a,{href:"#juce","aria-label":"juce permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"A powerful C++ framework that lets you build cross-platform audio plugins and apps with ease. It supports multiple plugin formats, such as VST, AUv2, AUv3, AAX, and LV2, and provides a rich set of features, such as audio processing, graphics, GUI, MIDI, networking, and more. JUCE is widely used by professional developers and companies, such as Korg, ROLI, and Native Instruments."),"\n",t.createElement(a.p,null,"Interestingly, JUCE uses tiers to determine your license:"),"\n",t.createElement(a.ul,null,"\n",t.createElement(a.li,null,"Personal (for developers or startup businesses with revenue under the 50K USD Revenue Limit; free)"),"\n",t.createElement(a.li,null,"Indie (for small businesses with under 500K USD Revenue Limit; $40/month)"),"\n",t.createElement(a.li,null,"Pro (no Revenue Limit; $130/month)"),"\n",t.createElement(a.li,null,"Educational (no Revenue Limit; free for bona fide educational institutions)"),"\n"),"\n",t.createElement(a.p,null,"But C++ is a steep learning curve for me."),"\n",t.createElement(a.h2,{id:"iplug2",style:{position:"relative"}},t.createElement(a.a,{href:"https://github.com/iPlug2/iPlug2"},"iPlug2"),t.createElement(a.a,{href:"#iplug2","aria-label":"iplug2 permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"Open-source C++ library that provides a framework for building cross-platform audio plugins. It supports multiple plugin APIs, such as VST2, VST3, AUv2, AUv3, AAX and WAM, with the same minimalistic code. There is an interesting ",t.createElement(a.a,{href:"https://github.com/iPlug2/iPlug2OOS"},"starter project")," which is maintained as an excellent form of documentation."),"\n",t.createElement(a.p,null,"While iPlug2 appears to be a far less limiting alternative to Steinberg's SDK as it would product bundles for all types DAWs from a single implementation. However, it requires C++ code which is new to me so I searched for a Rust alternative."),"\n",t.createElement(a.h2,{id:"nih-plug",style:{position:"relative"}},t.createElement(a.a,{href:"https://github.com/robbert-vdh/nih-plug"},"nih-plug"),t.createElement(a.a,{href:"#nih-plug","aria-label":"nih plug permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"Open-source Rust wrapper for the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">iPlug2</code>'}})," library. I'll be using this library in my example here."),"\n",t.createElement(a.p,null,"In the end, I selected the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">nih-plug</code>'}})," because it's open source, supports VST (which is all I thought I needed at the time), and is written in Rust which I'm interested in learning more about. I'll share my code and the steps to get up and running next."),"\n",t.createElement(a.h1,{id:"how-to-make-your-own-vst",style:{position:"relative"}},"How to make your own VST",t.createElement(a.a,{href:"#how-to-make-your-own-vst","aria-label":"how to make your own vst permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"I found the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">nih-plug</code>'}})," Rust library to be the lowest barrier to entry without limiting distribution options in future. You can get a basic VST example project up and running in about 20 mins."),"\n",t.createElement("ul",{className:l.JP},t.createElement("h4",null,"Why Rust?"),t.createElement(t.Fragment,null,t.createElement(a.p,null,"Javascript support in VSTs is still in its infancy. JS is limited in many ways too like the fact that it's single-threaded and has no support for multithreading. Rust, on the other hand, appears to be a great language for audio processing and I found a lot of support for VST development.")),t.createElement(t.Fragment,null,t.createElement(a.p,null,"It should be noted that traditionally, VSTs are written in C++ but I found Rust is recommended to be a great alternative for the uninitiated."))),"\n",t.createElement(a.h2,{id:"install-rust",style:{position:"relative"}},"Install Rust",t.createElement(a.a,{href:"#install-rust","aria-label":"install rust permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"You can install Rust by following the instructions on their website but I recommend using ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">rustup</code>'}})," which is a tool for managing Rust versions and toolchains. On MacOs, you can install ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">rustup-init</code>'}})," (yes, that name is correct) via ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">brew</code>'}})," by running the following command in your terminal:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">\nbrew <span class="token function">install</span> rustup-init\nrustup-init <span class="token comment"># this will install the latest stable version of Rust</span>\n\n</code></pre></div>'}}),"\n",t.createElement(a.h2,{id:"create-a-new-rust-project",style:{position:"relative"}},"Create a new Rust project",t.createElement(a.a,{href:"#create-a-new-rust-project","aria-label":"create a new rust project permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"Create a new Rust project with Cargo (Rust's package manager) by running the following command in the terminal:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">\n<span class="token function">cargo</span> new my_vst_plugin <span class="token parameter variable">--lib</span>\n\n</code></pre></div>'}}),"\n",t.createElement(a.p,null,"This creates a folder for the new project called ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">my_vst_plugin</code>'}}),". You can change the name of your project to whatever you want."),"\n",t.createElement(a.h2,{id:"add-the-nih-plug-library-to-your-project",style:{position:"relative"}},"Add the nih-plug library to your project",t.createElement(a.a,{href:"#add-the-nih-plug-library-to-your-project","aria-label":"add the nih plug library to your project permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"Add the following lines to your ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">Cargo.toml</code>'}})," file under the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">[dependencies]</code>'}})," section:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="toml"><pre class="language-toml"><code class="language-toml">\n<span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>\n<span class="token key property">nih_plug</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">git</span> <span class="token punctuation">=</span> <span class="token string">"https://github.com/robbert-vdh/nih-plug.git"</span><span class="token punctuation">,</span> <span class="token key property">features</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"assert_process_allocs"</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token key property">parking_lot</span> <span class="token punctuation">=</span> <span class="token string">"0.12"</span>\n\n</code></pre></div>'}}),"\n",t.createElement(a.p,null,"The ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">parking_lot</code>'}})," dependency is used by the example project's implementation, so it's also necessary to add it to your project for this specific example."),"\n",t.createElement(a.h2,{id:"implement-the-vst-logic",style:{position:"relative"}},"Implement the VST logic",t.createElement(a.a,{href:"#implement-the-vst-logic","aria-label":"implement the vst logic permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"Implement your plugin's logic by editing the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">src/lib.rs</code>'}})," file in the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">my_vst_plugin</code>'}})," folder."),"\n",t.createElement(a.p,null,"This example is a Gain plugin that multiplies the input signal by a gain value. It's a simple example but it's a great starting point for understanding how to build a VST."),"\n",t.createElement(a.p,null,"You can try any of the examples in the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">nih-plug</code>'}})," repo. Just ensure you update the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">Cargo.toml</code>'}})," file to include any dependencies that are required by the example you choose. You can then essentially copy/paste the example's ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">src/lib.rs</code>'}})," file into your project's ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">src/lib.rs</code>'}})," file."),"\n",t.createElement(a.p,null,"I'll paste the implementation I went with below. The devs over at ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">nih-plug</code>'}})," have event added detailed comments to explain what's going on:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="rust"><pre class="language-rust"><code class="language-rust">  \n<span class="token keyword">use</span> <span class="token namespace">nih_plug<span class="token punctuation">::</span>prelude<span class="token punctuation">::</span></span><span class="token operator">*</span><span class="token punctuation">;</span>\n<span class="token keyword">use</span> <span class="token namespace">parking_lot<span class="token punctuation">::</span></span><span class="token class-name">Mutex</span><span class="token punctuation">;</span>\n<span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>sync<span class="token punctuation">::</span></span><span class="token class-name">Arc</span><span class="token punctuation">;</span>\n\n<span class="token keyword">struct</span> <span class="token type-definition class-name">Gain</span> <span class="token punctuation">{</span>\n    params<span class="token punctuation">:</span> <span class="token class-name">Arc</span><span class="token operator">&lt;</span><span class="token class-name">GainParams</span><span class="token operator">></span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/// The [`Params`] derive macro gathers all of the information needed for the wrapper to know about</span>\n<span class="token comment">/// the plugin\'s parameters, persistent serializable fields, and nested parameter groups. You can</span>\n<span class="token comment">/// also easily implement [`Params`] by hand if you want to, for instance, have multiple instances</span>\n<span class="token comment">/// of a parameters struct for multiple identical oscillators/filters/envelopes.</span>\n<span class="token attribute attr-name">#[derive(Params)]</span>\n<span class="token keyword">struct</span> <span class="token type-definition class-name">GainParams</span> <span class="token punctuation">{</span>\n    <span class="token comment">/// The parameter\'s ID is used to identify the parameter in the wrapped plugin API. As long as</span>\n    <span class="token comment">/// these IDs remain constant, you can rename and reorder these fields as you wish. The</span>\n    <span class="token comment">/// parameters are exposed to the host in the same order they were defined. In this case, this</span>\n    <span class="token comment">/// gain parameter is stored as linear gain while the values are displayed in decibels.</span>\n    <span class="token attribute attr-name">#[id = <span class="token string">"gain"</span>]</span>\n    <span class="token keyword">pub</span> gain<span class="token punctuation">:</span> <span class="token class-name">FloatParam</span><span class="token punctuation">,</span>\n\n    <span class="token comment">/// This field isn\'t used in this example, but anything written to the vector would be restored</span>\n    <span class="token comment">/// together with a preset/state file saved for this plugin. This can be useful for storing</span>\n    <span class="token comment">/// things like sample data.</span>\n    <span class="token attribute attr-name">#[persist = <span class="token string">"industry_secrets"</span>]</span>\n    <span class="token keyword">pub</span> random_data<span class="token punctuation">:</span> <span class="token class-name">Mutex</span><span class="token operator">&lt;</span><span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token keyword">f32</span><span class="token operator">>></span><span class="token punctuation">,</span>\n\n    <span class="token comment">/// You can also nest parameter structs. These will appear as a separate nested group if your</span>\n    <span class="token comment">/// DAW displays parameters in a tree structure.</span>\n    <span class="token attribute attr-name">#[nested(group = <span class="token string">"Subparameters"</span>)]</span>\n    <span class="token keyword">pub</span> sub_params<span class="token punctuation">:</span> <span class="token class-name">SubParams</span><span class="token punctuation">,</span>\n\n    <span class="token comment">/// Nested parameters also support some advanced functionality for reusing the same parameter</span>\n    <span class="token comment">/// struct multiple times.</span>\n    <span class="token attribute attr-name">#[nested(array, group = <span class="token string">"Array Parameters"</span>)]</span>\n    <span class="token keyword">pub</span> array_params<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">ArrayParams</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span> \n\n<span class="token attribute attr-name">#[derive(Params)]</span>\n<span class="token keyword">struct</span> <span class="token type-definition class-name">SubParams</span> <span class="token punctuation">{</span>\n    <span class="token attribute attr-name">#[id = <span class="token string">"thing"</span>]</span>\n    <span class="token keyword">pub</span> nested_parameter<span class="token punctuation">:</span> <span class="token class-name">FloatParam</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token attribute attr-name">#[derive(Params)]</span>\n<span class="token keyword">struct</span> <span class="token type-definition class-name">ArrayParams</span> <span class="token punctuation">{</span>\n    <span class="token comment">/// This parameter\'s ID will get a `_1`, `_2`, and a `_3` suffix because of how it\'s used in</span>\n    <span class="token comment">/// `array_params` above.</span>\n    <span class="token attribute attr-name">#[id = <span class="token string">"noope"</span>]</span>\n    <span class="token keyword">pub</span> nope<span class="token punctuation">:</span> <span class="token class-name">FloatParam</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> <span class="token class-name">Default</span> <span class="token keyword">for</span> <span class="token class-name">Gain</span> <span class="token punctuation">{</span>\n    <span class="token keyword">fn</span> <span class="token function-definition function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">Self</span> <span class="token punctuation">{</span>\n        <span class="token keyword">Self</span> <span class="token punctuation">{</span>\n            params<span class="token punctuation">:</span> <span class="token class-name">Arc</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">GainParams</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> <span class="token class-name">Default</span> <span class="token keyword">for</span> <span class="token class-name">GainParams</span> <span class="token punctuation">{</span>\n    <span class="token keyword">fn</span> <span class="token function-definition function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">Self</span> <span class="token punctuation">{</span>\n        <span class="token keyword">Self</span> <span class="token punctuation">{</span>\n            <span class="token comment">// This gain is stored as linear gain. NIH-plug comes with useful conversion functions</span>\n            <span class="token comment">// to treat these kinds of parameters as if we were dealing with decibels. Storing this</span>\n            <span class="token comment">// as decibels is easier to work with, but requires a conversion for every sample.</span>\n            gain<span class="token punctuation">:</span> <span class="token class-name">FloatParam</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>\n                <span class="token string">"Gain"</span><span class="token punctuation">,</span>\n                <span class="token namespace">util<span class="token punctuation">::</span></span><span class="token function">db_to_gain</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n                <span class="token class-name">FloatRange</span><span class="token punctuation">::</span><span class="token class-name">Skewed</span> <span class="token punctuation">{</span>\n                    min<span class="token punctuation">:</span> <span class="token namespace">util<span class="token punctuation">::</span></span><span class="token function">db_to_gain</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">30.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n                    max<span class="token punctuation">:</span> <span class="token namespace">util<span class="token punctuation">::</span></span><span class="token function">db_to_gain</span><span class="token punctuation">(</span><span class="token number">30.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n                    <span class="token comment">// This makes the range appear as if it was linear when displaying the values as</span>\n                    <span class="token comment">// decibels</span>\n                    factor<span class="token punctuation">:</span> <span class="token class-name">FloatRange</span><span class="token punctuation">::</span><span class="token function">gain_skew_factor</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">30.0</span><span class="token punctuation">,</span> <span class="token number">30.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">)</span>\n            <span class="token comment">// Because the gain parameter is stored as linear gain instead of storing the value as</span>\n            <span class="token comment">// decibels, we need logarithmic smoothing</span>\n            <span class="token punctuation">.</span><span class="token function">with_smoother</span><span class="token punctuation">(</span><span class="token class-name">SmoothingStyle</span><span class="token punctuation">::</span><span class="token class-name">Logarithmic</span><span class="token punctuation">(</span><span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n            <span class="token punctuation">.</span><span class="token function">with_unit</span><span class="token punctuation">(</span><span class="token string">" dB"</span><span class="token punctuation">)</span>\n            <span class="token comment">// There are many predefined formatters we can use here. If the gain was stored as</span>\n            <span class="token comment">// decibels instead of as a linear gain value, we could have also used the</span>\n            <span class="token comment">// `.with_step_size(0.1)` function to get internal rounding.</span>\n            <span class="token punctuation">.</span><span class="token function">with_value_to_string</span><span class="token punctuation">(</span><span class="token namespace">formatters<span class="token punctuation">::</span></span><span class="token function">v2s_f32_gain_to_db</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n            <span class="token punctuation">.</span><span class="token function">with_string_to_value</span><span class="token punctuation">(</span><span class="token namespace">formatters<span class="token punctuation">::</span></span><span class="token function">s2v_f32_gain_to_db</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token comment">// Persisted fields can be initialized like any other fields, and they\'ll keep their</span>\n            <span class="token comment">// values when restoring the plugin\'s state.</span>\n            random_data<span class="token punctuation">:</span> <span class="token class-name">Mutex</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">Vec</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n            sub_params<span class="token punctuation">:</span> <span class="token class-name">SubParams</span> <span class="token punctuation">{</span>\n                nested_parameter<span class="token punctuation">:</span> <span class="token class-name">FloatParam</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>\n                    <span class="token string">"Unused Nested Parameter"</span><span class="token punctuation">,</span>\n                    <span class="token number">0.5</span><span class="token punctuation">,</span>\n                    <span class="token class-name">FloatRange</span><span class="token punctuation">::</span><span class="token class-name">Skewed</span> <span class="token punctuation">{</span>\n                        min<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">,</span>\n                        max<span class="token punctuation">:</span> <span class="token number">2.4</span><span class="token punctuation">,</span>\n                        factor<span class="token punctuation">:</span> <span class="token class-name">FloatRange</span><span class="token punctuation">::</span><span class="token function">skew_factor</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n                    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                <span class="token punctuation">)</span>\n                <span class="token punctuation">.</span><span class="token function">with_value_to_string</span><span class="token punctuation">(</span><span class="token namespace">formatters<span class="token punctuation">::</span></span><span class="token function">v2s_f32_rounded</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            array_params<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>index<span class="token closure-punctuation punctuation">|</span></span> <span class="token class-name">ArrayParams</span> <span class="token punctuation">{</span>\n                nope<span class="token punctuation">:</span> <span class="token class-name">FloatParam</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>\n                    <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">"Nope {index}"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n                    <span class="token number">0.5</span><span class="token punctuation">,</span>\n                    <span class="token class-name">FloatRange</span><span class="token punctuation">::</span><span class="token class-name">Linear</span> <span class="token punctuation">{</span> min<span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span> max<span class="token punctuation">:</span> <span class="token number">2.0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                <span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> <span class="token class-name">Plugin</span> <span class="token keyword">for</span> <span class="token class-name">Gain</span> <span class="token punctuation">{</span>\n    <span class="token comment">// You reference fields from the `Cargo.toml` file here</span>\n    <span class="token keyword">const</span> <span class="token constant">VENDOR</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">\'static</span> <span class="token keyword">str</span> <span class="token operator">=</span> <span class="token macro property">env!</span><span class="token punctuation">(</span><span class="token string">"CARGO_PKG_AUTHORS"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> <span class="token constant">NAME</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">\'static</span> <span class="token keyword">str</span> <span class="token operator">=</span> <span class="token macro property">env!</span><span class="token punctuation">(</span><span class="token string">"CARGO_PKG_NAME"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> <span class="token constant">VERSION</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">\'static</span> <span class="token keyword">str</span> <span class="token operator">=</span> <span class="token macro property">env!</span><span class="token punctuation">(</span><span class="token string">"CARGO_PKG_VERSION"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> <span class="token constant">URL</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">\'static</span> <span class="token keyword">str</span> <span class="token operator">=</span> <span class="token macro property">env!</span><span class="token punctuation">(</span><span class="token string">"CARGO_PKG_HOMEPAGE"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> <span class="token constant">EMAIL</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">\'static</span> <span class="token keyword">str</span> <span class="token operator">=</span> <span class="token string">"info@example.com"</span><span class="token punctuation">;</span>\n\n\n    <span class="token comment">// The first audio IO layout is used as the default. The other layouts may be selected either</span>\n    <span class="token comment">// explicitly or automatically by the host or the user depending on the plugin API/backend.</span>\n    <span class="token keyword">const</span> <span class="token constant">AUDIO_IO_LAYOUTS</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">\'static</span> <span class="token punctuation">[</span><span class="token class-name">AudioIOLayout</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>\n        <span class="token class-name">AudioIOLayout</span> <span class="token punctuation">{</span>\n            main_input_channels<span class="token punctuation">:</span> <span class="token class-name">NonZeroU32</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n            main_output_channels<span class="token punctuation">:</span> <span class="token class-name">NonZeroU32</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\n            aux_input_ports<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n            aux_output_ports<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n\n            <span class="token comment">// Individual ports and the layout as a whole can be named here. By default these names</span>\n            <span class="token comment">// are generated as needed. This layout will be called \'Stereo\', while the other one is</span>\n            <span class="token comment">// given the name \'Mono\' based no the number of input and output channels.</span>\n            names<span class="token punctuation">:</span> <span class="token class-name">PortNames</span><span class="token punctuation">::</span><span class="token function">const_default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token class-name">AudioIOLayout</span> <span class="token punctuation">{</span>\n            main_input_channels<span class="token punctuation">:</span> <span class="token class-name">NonZeroU32</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n            main_output_channels<span class="token punctuation">:</span> <span class="token class-name">NonZeroU32</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token punctuation">..</span><span class="token class-name">AudioIOLayout</span><span class="token punctuation">::</span><span class="token function">const_default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">const</span> <span class="token constant">MIDI_INPUT</span><span class="token punctuation">:</span> <span class="token class-name">MidiConfig</span> <span class="token operator">=</span> <span class="token class-name">MidiConfig</span><span class="token punctuation">::</span><span class="token class-name">None</span><span class="token punctuation">;</span>\n    <span class="token comment">// Setting this to `true` will tell the wrapper to split the buffer up into smaller blocks</span>\n    <span class="token comment">// whenever there are inter-buffer parameter changes. This way no changes to the plugin are</span>\n    <span class="token comment">// required to support sample accurate automation and the wrapper handles all of the boring</span>\n    <span class="token comment">// stuff like making sure transport and other timing information stays consistent between the</span>\n    <span class="token comment">// splits.</span>\n    <span class="token keyword">const</span> <span class="token constant">SAMPLE_ACCURATE_AUTOMATION</span><span class="token punctuation">:</span> <span class="token keyword">bool</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// If the plugin can send or receive SysEx messages, it can define a type to wrap around those</span>\n    <span class="token comment">// messages here. The type implements the `SysExMessage` trait, which allows conversion to and</span>\n    <span class="token comment">// from plain byte buffers.</span>\n    <span class="token keyword">type</span> <span class="token type-definition class-name">SysExMessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// More advanced plugins can use this to run expensive background tasks. See the field\'s</span>\n    <span class="token comment">// documentation for more information. `()` means that the plugin does not have any background</span>\n    <span class="token comment">// tasks.</span>\n    <span class="token keyword">type</span> <span class="token type-definition class-name">BackgroundTask</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">fn</span> <span class="token function-definition function">params</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Arc</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token class-name">Params</span><span class="token operator">></span> <span class="token punctuation">{</span>\n        <span class="token keyword">self</span><span class="token punctuation">.</span>params<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// This plugin doesn\'t need any special initialization, but if you need to do anything expensive</span>\n    <span class="token comment">// then this would be the place. State is kept around when the host reconfigures the</span>\n    <span class="token comment">// plugin. If we do need special initialization, we could implement the `initialize()` and/or</span>\n    <span class="token comment">// `reset()` methods</span>\n\n    <span class="token keyword">fn</span> <span class="token function-definition function">process</span><span class="token punctuation">(</span>\n        <span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">,</span>\n        buffer<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token class-name">Buffer</span><span class="token punctuation">,</span>\n        _aux<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token class-name">AuxiliaryBuffers</span><span class="token punctuation">,</span>\n        _context<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token keyword">impl</span> <span class="token class-name">ProcessContext</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token operator">></span><span class="token punctuation">,</span>\n    <span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">ProcessStatus</span> <span class="token punctuation">{</span>\n        <span class="token keyword">for</span> channel_samples <span class="token keyword">in</span> buffer<span class="token punctuation">.</span><span class="token function">iter_samples</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token comment">// Smoothing is optionally built into the parameters themselves</span>\n            <span class="token keyword">let</span> gain <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>params<span class="token punctuation">.</span>gain<span class="token punctuation">.</span>smoothed<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            <span class="token keyword">for</span> sample <span class="token keyword">in</span> channel_samples <span class="token punctuation">{</span>\n                <span class="token operator">*</span>sample <span class="token operator">*=</span> gain<span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token class-name">ProcessStatus</span><span class="token punctuation">::</span><span class="token class-name">Normal</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// This can be used for cleaning up special resources like socket connections whenever the</span>\n    <span class="token comment">// plugin is deactivated. Most plugins won\'t need to do anything here.</span>\n    <span class="token keyword">fn</span> <span class="token function-definition function">deactivate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> <span class="token class-name">ClapPlugin</span> <span class="token keyword">for</span> <span class="token class-name">Gain</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token constant">CLAP_ID</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">\'static</span> <span class="token keyword">str</span> <span class="token operator">=</span> <span class="token string">"com.moist-plugins-gmbh.gain"</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> <span class="token constant">CLAP_DESCRIPTION</span><span class="token punctuation">:</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">\'static</span> <span class="token keyword">str</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token string">"A smoothed gain parameter example plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> <span class="token constant">CLAP_MANUAL_URL</span><span class="token punctuation">:</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">\'static</span> <span class="token keyword">str</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token keyword">Self</span><span class="token punctuation">::</span><span class="token constant">URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> <span class="token constant">CLAP_SUPPORT_URL</span><span class="token punctuation">:</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">\'static</span> <span class="token keyword">str</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token class-name">None</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> <span class="token constant">CLAP_FEATURES</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">\'static</span> <span class="token punctuation">[</span><span class="token class-name">ClapFeature</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>\n        <span class="token class-name">ClapFeature</span><span class="token punctuation">::</span><span class="token class-name">AudioEffect</span><span class="token punctuation">,</span>\n        <span class="token class-name">ClapFeature</span><span class="token punctuation">::</span><span class="token class-name">Stereo</span><span class="token punctuation">,</span>\n        <span class="token class-name">ClapFeature</span><span class="token punctuation">::</span><span class="token class-name">Mono</span><span class="token punctuation">,</span>\n        <span class="token class-name">ClapFeature</span><span class="token punctuation">::</span><span class="token class-name">Utility</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> <span class="token class-name">Vst3Plugin</span> <span class="token keyword">for</span> <span class="token class-name">Gain</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token constant">VST3_CLASS_ID</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">u8</span><span class="token punctuation">;</span> <span class="token number">16</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">*</span><span class="token string">b"GainMoistestPlug"</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> <span class="token constant">VST3_SUBCATEGORIES</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">\'static</span> <span class="token punctuation">[</span><span class="token class-name">Vst3SubCategory</span><span class="token punctuation">]</span> <span class="token operator">=</span>\n        <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token class-name">Vst3SubCategory</span><span class="token punctuation">::</span><span class="token class-name">Fx</span><span class="token punctuation">,</span> <span class="token class-name">Vst3SubCategory</span><span class="token punctuation">::</span><span class="token class-name">Tools</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token macro property">nih_export_clap!</span><span class="token punctuation">(</span><span class="token class-name">Gain</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token macro property">nih_export_vst3!</span><span class="token punctuation">(</span><span class="token class-name">Gain</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n</code></pre></div>'}}),"\n",t.createElement(a.h2,{id:"setup-bundling-and-building",style:{position:"relative"}},"Setup bundling and building",t.createElement(a.a,{href:"#setup-bundling-and-building","aria-label":"setup bundling and building permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"Normally, in Rust, projects are built by running ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">cargo build</code>'}})," in the terminal. However, we want to produce a specific filetype, or bundle a VST, so we need to first add some configuration to the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">Cargo.toml</code>'}})," file to enable building and bundling."),"\n",t.createElement(a.p,null,"We will eventually build ",t.createElement("i",null,"and bundle")," using this command:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">\n<span class="token function">cargo</span> xtask bundle my_vst_plugin <span class="token parameter variable">--release</span>\n\n</code></pre></div>'}}),"\n",t.createElement(a.p,null,"The build command is running a Cargo subcommand called ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xtask</code>'}})," to enable bundling."),"\n",t.createElement(a.p,null,"Here's a step by step guide on how to add ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xtask</code>'}}),", a Rust subcommand that can help you with building and bundling your nih-plug projects:"),"\n",t.createElement(a.ol,null,"\n",t.createElement(a.li,null,"Create a new binary package named ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xtask</code>'}})," in your project directory by running the following command:","\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># from your project directory run: </span>\n\n<span class="token function">cargo</span> new <span class="token parameter variable">--bin</span> xtask\n\n</code></pre></div>'}}),"\n"),"\n",t.createElement(a.li,null,"Add the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xtask</code>'}})," package to the members list in your workspace ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">Cargo.toml</code>'}})," file. This will make the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xtask</code>'}})," package part of your workspace and allow you to run it with cargo. You can do this by editing the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">Cargo.toml</code>'}})," file and adding the following lines:","\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="toml"><pre class="language-toml"><code class="language-toml"><span class="token comment"># in my_vst_plugin/Cargo.toml :</span>\n\n<span class="token punctuation">[</span><span class="token table class-name">workspace</span><span class="token punctuation">]</span>\n<span class="token key property">members</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>\n    <span class="token string">"xtask"</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span>\n\n</code></pre></div>'}}),"\n"),"\n",t.createElement(a.li,null,"Add the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">nih_plug_xtask</code>'}})," dependency to the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xtask</code>'}})," package's ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">Cargo.toml</code>'}})," file. This will allow you to use the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">nih_plug_xtask</code>'}})," library, which provides the implementation of the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xtask</code>'}})," command. You can do this by editing the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xtask/Cargo.toml</code>'}})," file and adding the following line:","\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="toml"><pre class="language-toml"><code class="language-toml"><span class="token comment"># in my_vst_plugin/xtask/Cargo.toml:</span>\n\n<span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>\n<span class="token key property">nih_plug_xtask</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">git</span> <span class="token punctuation">=</span> <span class="token string">"https://github.com/robbert-vdh/nih-plug.git"</span> <span class="token punctuation">}</span>\n\n</code></pre></div>'}}),"\n"),"\n",t.createElement(a.li,null,"Call the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">nih_plug_xtask::main()</code>'}})," function from the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xtask</code>'}})," package's ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">main.rs</code>'}})," file. This will delegate the execution of the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xtask</code>'}})," command to the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">nih_plug_xtask</code>'}})," library. You can do this by editing the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xtask/src/main.rs</code>'}})," file and replacing its content with the following code:","\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="rust"><pre class="language-rust"><code class="language-rust"><span class="token comment">// in my_vst_plugin/xtask/src/main.rs:</span>\n\n<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token namespace">nih_plug_xtask<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token namespace">nih_plug_xtask<span class="token punctuation">::</span></span><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n</code></pre></div>'}}),"\n"),"\n",t.createElement(a.li,null,"Create a .cargo/config.toml file in your project directory and add an alias for the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xtask</code>'}})," command. This will allow you to run the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xtask</code>'}})," package with a shorter command: ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">cargo xtask</code>'}}),". You can do this by creating the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.cargo/config.toml</code>'}})," file and adding the following lines:","\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="toml"><pre class="language-toml"><code class="language-toml"><span class="token comment"># in my_vst_plugin/.cargo/config.toml:</span>\n\n<span class="token punctuation">[</span><span class="token table class-name">alias</span><span class="token punctuation">]</span>\n<span class="token key property">xtask</span> <span class="token punctuation">=</span> <span class="token string">"run --package xtask --release --"</span>\n\n</code></pre></div>'}}),"\n"),"\n",t.createElement(a.li,null,"Now you can use the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">cargo xtask</code>'}})," command to run the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xtask</code>'}})," package and access its subcommands, such as ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">bundle</code>'}}),"."),"\n"),"\n",t.createElement(a.h2,{id:"build-the-project",style:{position:"relative"}},"Build the project",t.createElement(a.a,{href:"#build-the-project","aria-label":"build the project permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"Now that we're all setup, let's build the project by running the following command in the terminal from the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">my_vst_plugin</code>'}})," folder:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">\n<span class="token function">cargo</span> xtask bundle my_vst_plugin <span class="token parameter variable">--release</span>\n\n</code></pre></div>'}}),"\n",t.createElement("div",{style:{display:"flex",justifyContent:"center",margin:".5em"}},t.createElement("img",{alt:"build-bundle.gif",src:c,width:"100%"})),"\n",t.createElement(a.p,null,"This will produce 2 files:"),"\n",t.createElement(a.ul,null,"\n",t.createElement(a.li,null,t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">target/bundled/my_vst_plugin.vst3</code>'}})),"\n",t.createElement(a.li,null,t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">target/bundled/my_vst_plugin.clap</code>'}}),"."),"\n"),"\n",t.createElement(a.p,null,"The second file generated is of the CLever Audio Plug-in or \"CLAP\" format. It's a newer and extended alternative to the VST format. CLAP supports MIDI fully, is cross-platform like VST except it's open source and tries to overcome the legal limitations of the proprietary VST format. You can read more about it ",t.createElement(a.a,{href:"https://u-he.com/community/clap/"},"CLAP format")," but so far, its in early stages and has limited support."),"\n",t.createElement(a.p,null,"Anyway, let's test the VST3 file in a DAW and see if it works."),"\n",t.createElement(a.h1,{id:"test-your-vst-locally",style:{position:"relative"}},"Test your VST locally",t.createElement(a.a,{href:"#test-your-vst-locally","aria-label":"test your vst locally permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"Alright, let's get to the good stuff."),"\n",t.createElement(a.p,null,"To try out your shiny new VST, you'll need a DAW. I use Logic Pro X, so I was in for a rude awakening when I learned that Apple has its own special snowflake format called ",t.createElement(a.a,{href:"https://developer.apple.com/library/archive/samplecode/sc2195/Introduction/Intro.html#//apple_ref/doc/uid/DTS40013969-Intro-DontLinkElementID_2"},"Audio Units"),"."),"\n",t.createElement(a.p,null,"So, to test the VST, ensure you use a DAW that actually support it:"),"\n",t.createElement(a.ul,null,"\n",t.createElement(a.li,null,t.createElement(a.a,{href:"https://www.reaper.fm/"},"Reaper"),": the grim harvester of souls and sounds"),"\n",t.createElement(a.li,null,t.createElement(a.a,{href:"https://www.ableton.com/en/products/live-lite/"},"Ableton Live Lite"),": the diet version of the popular live performance software"),"\n",t.createElement(a.li,null,t.createElement(a.a,{href:"https://www.bandlab.com/products/cakewalk"},"Cakewalk"),": the resurrected zombie of the once-dead Sonar"),"\n",t.createElement(a.li,null,t.createElement(a.a,{href:"https://www.tracktion.com/products/waveform-free"},"Tracktion Waveform"),": a free DAW that seems cool but I haven't tried it yet"),"\n"),"\n",t.createElement(a.p,null,"I'm usually using Logic Pro X these days but I hear great things about Ableton so I decided to give it a try."),"\n",t.createElement(a.h2,{id:"move-the-vst-to-the-correct-folder",style:{position:"relative"}},"Move the VST to the correct folder",t.createElement(a.a,{href:"#move-the-vst-to-the-correct-folder","aria-label":"move the vst to the correct folder permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"Before even opening up the DAW, we need to put the VST in place for the DAW to find. On mac, I noticed that Logic already uses the folder at ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/Library/Audio/Plug-Ins/VST3</code>'}})," so I moved the new VST there."),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 900px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/216708bb092adb98810817916f386fef/dc616/vst-folder.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 53.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABuUlEQVR42m1SWY7UQAzN/c/ABwfgABwAIT4ZaQQ9qCdbd9JZK51UltofskPygcbSi8sp2/W8RN45aDVDGQ2tNLZtgzUG1lqGMeaE1hrrurJWSp0gm+CcQyTHEU/xwKJXGG0wzzOMtdiUhjG7E0EpjUnOEMOAdVOc+AA9RkTGcUTU9x1+pjXiOEHXdSAZVoPLrcK2SByi1YJbekVw6t+fwA8PwwApJTOsqgoR/fhdtEizjF8gEYvGr7TAOAhmhWDx423Ep685vnzv8fmbRNZqwBtm3LYtM63rGtE0TXhJClzf35kh2XLZkN1LzFJyC5TaUA0rXt9uuFzvqAcNbTy8d1zqUTonJFalmJg2ife74/8iRYfrnwvyLIHoGgTvuUyK574bg77v95JD8HtXQmBNQ6Dzjv2uKwskcYyiKPB4PHi69/sdTdNwMop5Pp+I6EPG0eidpTvPh1izr8YRTKByj9gzoRCCnXwI8D7AeZqeO8/UgmPXrHPnTvK+Wsu9o3uyOSENgprZdD2janew3Qs0dY08z1GWJfuRP4H6dWgCTZrIRfQCBaRpiuwDJEnCiOOYdZZlH4JyLMuCv/4ISn8E6SqwAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="vst-folder"\n        title=""\n        src="/static/216708bb092adb98810817916f386fef/1cfc2/vst-folder.png"\n        srcset="/static/216708bb092adb98810817916f386fef/3684f/vst-folder.png 225w,\n/static/216708bb092adb98810817916f386fef/fc2a6/vst-folder.png 450w,\n/static/216708bb092adb98810817916f386fef/1cfc2/vst-folder.png 900w,\n/static/216708bb092adb98810817916f386fef/dc616/vst-folder.png 933w"\n        sizes="(max-width: 900px) 100vw, 900px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),"\n",t.createElement(a.h2,{id:"configure-ableton-to-find-the-vst",style:{position:"relative"}},"Configure Ableton to find the VST",t.createElement(a.a,{href:"#configure-ableton-to-find-the-vst","aria-label":"configure ableton to find the vst permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"Open Ableton and go to Settings and specify the folder where you put the VST."),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 560px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/b302c0701402d14f1236b031ac98d5a1/b06ae/ableton-settings.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 120.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAADAUlEQVR42q2Vy07bQBSG82J9ga677QtEIiiJIBAlvjuJE8+M7SSgSJVgUajaXVd9iUqVQF1wqURCEOG2ogiUBP3VOUlMoYZC1cUvz3h8vvnPnGM7dXt7i/FohNFoiNF4jPF4jBHPRzweDofx+CkRh5S6vPyJ0+/fMPjxFYPTc5ydneL8nK5nuLi4wMHBAba2trC9vY3Dw8N47aFOTk5wdXWF1NFRH45toVatQEqJarUKz/NQ8zzU63X4vs/X2VgIwdeZaN5oNBCGIY6Pj5HqdbsolcswDJNhruPANA1oug7bdjiARJv5jTvI76J7Sin0+32kut0udF2DYRioVCpwXReO48C2LDiOywFBEEykFJSajBWPJ6LN6B4De70etHIZpmnxAkEJRhtYloVarcYpkYtmM0Kz2YwhSj4CLJVK0+AqOyQZpgnbtlm0RscRRRHCMIohUslkYJkdmnzwBKOxpukMIqc094WAkgKSjoAgauIwkMFDYJcdFotFPjtKmUC24/AG3rTaXE0RoS6aDBOBwLq1jlCEEFL8CSwUltgdBTu2DV034nTJpetW8L6VxWYrDRVIrNlrLD/0IUVCytQ25IIcmoYBTdNYtKbrOq+tigJW/Rw+ah+wZq9DBiLpDLscSC6popWKyw6pKNSPtAGJG1y04YlVKF+hoRoQVBgp49a6axtNw+LiIqc4axtqI5p7dW/awBIdmcc7mYEQPoR/v7FjIDX28nIR+XweuVxuUhDL4jRNw0RZK3OxVBDic/QaX6JXCAMBqYLkxibgwsIC5ubmkMlkuEWqtSq7I5DrOlwsKRU21Vt8Ct4gUILnSspkIKVLsPn5eXZIDz18X+leoHyWUnICVH8BkghIXw453T2WnEBmuoO+AHhfM0fyPzl8Qv/oMFmJwEKhwAUhUXUJ+Fx3MyDFMJD+GdlsFul0mkX9Rw8lfZkf0+xZBg4GA3Q6nfirQtZXVlbQbrefrVarhY2NDf5Zpa6vr/nnsr+/j729Pezu7mJnZ+dFohhi3Nzc4Be/l1I0W1pcFwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="ableton-settings"\n        title=""\n        src="/static/b302c0701402d14f1236b031ac98d5a1/b06ae/ableton-settings.png"\n        srcset="/static/b302c0701402d14f1236b031ac98d5a1/3684f/ableton-settings.png 225w,\n/static/b302c0701402d14f1236b031ac98d5a1/fc2a6/ableton-settings.png 450w,\n/static/b302c0701402d14f1236b031ac98d5a1/b06ae/ableton-settings.png 560w"\n        sizes="(max-width: 560px) 100vw, 560px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),"\n",t.createElement(a.h2,{id:"find-you-plugin-in-the-daw",style:{position:"relative"}},"Find you plugin in the DAW",t.createElement(a.a,{href:"#find-you-plugin-in-the-daw","aria-label":"find you plugin in the daw permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"Open the DAW and create a new project."),"\n",t.createElement(a.p,null,"Click on a track and then on the left choose 'Plug-Ins' within Ableton's browser. You should see your plugin listed there based on the VENDOR and NAME you specified in the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">lib.rs</code>'}})," file."),"\n",t.createElement("div",{style:{display:"flex",justifyContent:"center",margin:".5em"}},t.createElement("img",{alt:"ableton-my-vst.gif",src:p,width:"100%"})),"\n",t.createElement(a.p,null,"Drag it into the track and you should see the plugin's UI appear."),"\n",t.createElement(a.p,null,"Now, take a stab at modifying parameters and see if you can hear the difference."),"\n",t.createElement(a.h1,{id:"conclusion",style:{position:"relative"}},"Conclusion",t.createElement(a.a,{href:"#conclusion","aria-label":"conclusion permalink",className:"anchor after"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}}))),"\n",t.createElement(a.p,null,"This was a fun project and I learned a lot about VSTs and how to build them."),"\n",t.createElement(a.p,null,"One caveat that I did not see coming was the fact that Logic, or rather Apple, doesn't support VSTs. They have their own proprietary format called Audio Units. I'm not sure if this is a good thing for developers."),"\n",t.createElement(a.p,null,"In a future post, I will try to investigate how to use the same codebase to build both VST and AU formats. From my research thus far, it seems possible if I use the ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">iPlug2</code>'}})," or ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">JUCE</code>'}})," libraries instead of ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">nih-plug</code>'}}),". This ",t.createElement(a.a,{href:"https://github.com/iPlug2/iPlug2OOS"},"starter project")," is where I assume I could start."),"\n",t.createElement(a.p,null,"I hope you found this useful and that you'll be able to build your own VSTs now."))}var r=function(n){void 0===n&&(n={});const{wrapper:a}=Object.assign({},(0,s.ah)(),n.components);return a?t.createElement(a,n,t.createElement(i,n)):i(n)},u=e(6050),m=e(9357),d=e(3306),k=e(5291),h=e(5919),g=e(5067),f=e(9838),y=e(1766);const b=n=>{let{data:a,children:e}=n;const{mdx:{frontmatter:{title:s,tags:o,date:l,hero_image:p,hero_image_alt:c,hero_image_credit_link:i,hero_image_credit_text:r},tableOfContents:m}}=a;return t.createElement(u.Z,null,t.createElement("div",{style:{paddingTop:20}},t.createElement(g.Z,{title:s,path:"blog"}),p&&t.createElement(y.Z,{image:p,alt:c,credit:r,link:i}),t.createElement("h1",null,s),t.createElement(d.Z,{tags:o}),t.createElement("h5",null,l),t.createElement("br"),t.createElement(k.Z,{tocs:m}),t.createElement(f.Z),t.createElement("div",null,e),t.createElement("br"),t.createElement(h.Z)))},w=n=>{let{location:a,data:e}=n;return t.createElement(m.Z,{location:a,title:e.mdx.frontmatter.title,hero_image:e.mdx.frontmatter.hero_image,excerpt:e.mdx.excerpt})};function v(n){return t.createElement(b,n,t.createElement(r,n))}},789:function(n,a,e){var s=e(7294),t=e(4854),o=e(8032);const l=["lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightgray"];a.Z=n=>{let{idx:a,node:{id:e,frontmatter:{thumbnail:p,slug:c,title:i,date:r,tags:u},excerpt:m}}=n;const d=(0,o.c)(p),k=l[a%l.length],{0:h,1:g}=(0,s.useState)("span 1");(0,s.useEffect)((()=>{window.addEventListener("resize",(()=>{window.innerWidth<=768?g("span 2"):g("span 1")}))}),[]);const f={article:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gridGap:"1em",maxWidth:"99%",padding:"1em"},tag:{padding:4,margin:"4px",backgroundColor:"#e0e0e0",color:"inherit",borderRadius:"4px",textDecoration:"none"},blogFooterTags:{display:"flex",flexWrap:"wrap"},heading:{marginTop:0,fontSize:"1.3em",fontWeight:600,textDecorationLine:"underline",textDecorationStyle:"solid",textDecorationColor:k,textDecorationThickness:1,maxWidth:"max-content"},thumbnailWrapper:{margin:"0.35em 0 0 0",justifySelf:"center",gridColumn:h,maxWidth:350},info:{gridColumn:"span 2",justifyContent:"space-around",display:"flex",flexDirection:"column"},hr:{color:k,margin:0}};return s.createElement("div",null,s.createElement("hr",{style:f.hr}),s.createElement("article",{style:f.article},s.createElement("div",{style:f.thumbnailWrapper},s.createElement(t.Link,{id:"nohighlight","aria-label":"Read more about "+i,to:"/blog/"+c+"/"},s.createElement(o.G,{image:d,alt:"Thumbnail for "+i}))),s.createElement("div",{style:f.info},s.createElement(t.Link,{"aria-label":"Read more about "+i,to:"/blog/"+c+"/",style:f.heading},i),s.createElement("h5",null,r),s.createElement("p",null,m),s.createElement("div",{style:f.blogFooterTags},u.map((n=>s.createElement(t.Link,{key:n,to:"/tags/"+n.replace(/ /g,"-")+"/",style:f.tag},n)))))))}},9838:function(n,a,e){var s=e(7294);const t=e(2788).default.button.withConfig({displayName:"back-to-top__BackToTopButton",componentId:"sc-izz6d7-0"})(["position:fixed;bottom:calc(12% - 30px);right:0;z-index:2;font-size:18px;border:none;outline:none;background-color:white !important;color:black;cursor:pointer;padding:0;width:60px;height:60px;border-radius:4px;box-shadow:0px 2px 4px rgba(0,0,0,0.2);white-space:nowrap;"]);a.Z=()=>{const{0:n,1:a}=(0,s.useState)(!1);(0,s.useEffect)((()=>{const n=()=>{window.pageYOffset>1e3?a(!0):a(!1)};return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)}),[]);return n?s.createElement(t,{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})}},s.createElement("span",null,"â†‘")):null}},5067:function(n,a,e){var s=e(4854),t=e(7294);const o={breadcrumbs:{display:"flex",alignItems:"baseline",margin:4,fontSize:"max(.85vw, .9em)"},breadcrumbLink:{paddingRight:2,whiteSpace:"nowrap",textDecoration:"none"},breadcrumbLinkHighlight:{fontWeight:600,textDecoration:"none"},breadcrumbLinkSeparator:{fontSize:".75em",fontWeight:600,margin:3,paddingBottom:4,color:"rgb(46, 107, 77)"}};a.Z=n=>{let{title:a,path:e}=n;return t.createElement("div",{style:o.breadcrumbs},t.createElement(s.Link,{"aria-label":"Home",style:o.breadcrumbLink,to:"/"},"< ","Home"),t.createElement("div",{style:o.breadcrumbLinkSeparator},"/"),t.createElement(s.Link,{"aria-label":e,style:o.breadcrumbLink,to:"/"+e+"/"},e.charAt(0).toUpperCase()+e.slice(1)),t.createElement("div",{style:o.breadcrumbLinkSeparator},"/"),t.createElement(s.Link,{"aria-label":a,style:o.breadcrumbLinkHighlight,to:"./"},a))}},1766:function(n,a,e){var s=e(7294),t=e(8032);a.Z=n=>{let{image:a,alt:e,credit:o,link:l}=n;return s.createElement("div",{style:{textAlign:"right"}},s.createElement("div",{style:{position:"relative",maxHeight:"45vh",borderRadius:"5px",overflow:"hidden"}},s.createElement(t.G,{image:(0,t.c)(a),alt:e}),s.createElement("span",{style:{position:"absolute",top:"4%",right:"4%",color:"white",fontSize:"max(3vh, 2.3vw)",textAlign:"right",fontWeight:600,textShadow:"0px 1px 8px black",transformOrigin:"bottom",maxWidth:"80%",whiteSpace:"pre-wrap",wordBreak:"break-word",letterSpacing:".2rem"}},e)),s.createElement("p",{style:{margin:0,marginTop:2,fontSize:12}},"Image:"," ",s.createElement("a",{"aria-label":l,href:l},o)))}},5919:function(n,a,e){var s=e(7294),t=e(4854),o=e(789);const l={blogFooter:{margin:16,padding:16,display:"flex",flexDirection:"column",alignItems:"start",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2), 0px 6px 10px 0px rgba(0,0,0,0.14), 0px 1px 18px 0px rgba(0,0,0,0.12)",borderRadius:10},blogFooterLink:{textDecoration:"none",padding:4},blogFooterImage:{height:"90%",paddingTop:10,marginRight:20},blogFooterImageWrap:{justifySelf:"center",height:200},blogFooterInfo:{marginLeft:16},blogFooterGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:16},blogFooterTags:{display:"flex",flexWrap:"wrap"},blogFooterTag:{margin:4,padding:4,backgroundColor:"#e0e0e0",borderRadius:4}};a.Z=()=>{const{0:n,1:a}=(0,s.useState)(""),{0:e,1:p}=(0,s.useState)(null),c=(0,t.useStaticQuery)("2486570436");(0,s.useEffect)((()=>{const n=window.location.href.split("/").filter((n=>n)).pop();a(n)}),[]),(0,s.useEffect)((()=>{const a=c.allMdx.nodes.find((a=>a.frontmatter.slug===n));p(a)}),[n,c.allMdx.nodes]);const{nodes:i}=c.allMdx;if(e&&e.frontmatter.tags){const a=i.filter((a=>a.frontmatter.slug!==n&&a.frontmatter.tags.some((n=>e.frontmatter.tags.includes(n))))),p=a[Math.floor((new Date).getMinutes()/10)%a.length]||i[0],c=e.frontmatter.tags.includes("music")?i.filter((a=>a.frontmatter.slug!==n&&a.frontmatter.slug!==p.frontmatter.slug&&!a.frontmatter.tags.includes("music"))):i.filter((a=>a.frontmatter.slug!==n&&a.frontmatter.slug!==p.frontmatter.slug&&a.frontmatter.tags.includes("music"))),r=c[Math.floor((new Date).getMinutes()/10)%c.length]||i[1];return s.createElement("div",{style:l.blogFooter},s.createElement("h3",null,s.createElement(t.Link,{to:"/blog/",style:l.blogFooterLink},"Check out other articles:")),s.createElement("h5",null,"Similar tags:"),s.createElement(o.Z,{node:p}),s.createElement("h5",null,"Maybe something else: "),s.createElement(o.Z,{node:r}))}return s.createElement("div",{style:l.blogFooter},s.createElement("h3",null,"Loading..."))}},5291:function(n,a,e){var s=e(7294),t=e(4854),o=e(7814),l=e(9417);a.Z=n=>{let{tocs:a}=n;const{items:e}=a||{items:[]},{0:p,1:c}=(0,s.useState)(!1),{0:i,1:r}=(0,s.useState)(!1),u={fontWeight:600},m={padding:"0 1.6rem"},d={color:"#35435d",textDecoration:"none"},k={backgroundColor:"rgb(46, 107, 77)",color:"#ffffff"},h={backgroundColor:"#35435d",color:"#ffffff"};return s.createElement(s.Fragment,null,s.createElement("button",{style:{fontSize:"1.1em",fontWeight:300,border:"none",borderLeft:"solid 5px lightgrey",borderRadius:"0 23px 23px 0",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1.5rem 0 1rem",margin:0,boxShadow:"5px 5px 95px rgba(183, 183, 183, 0.335) inset"},onClick:()=>{c(!p)}},"Table of Contents:",s.createElement(o.G,{style:{width:32,height:32},icon:p?l.mTx:l.ptq})),p&&s.createElement("div",{style:{margin:0,lineHeight:"1.75em"}},s.createElement("ol",{style:{padding:"8px 2.5rem 16px",borderLeft:"solid 5px lightgrey"}},null==e?void 0:e.map((n=>s.createElement("li",{key:n.title},s.createElement(t.Link,{key:n.title,style:{...d,...i===n.title?k:null},to:n.url,onMouseEnter:()=>{r(n.title)},onMouseLeave:()=>{r(!1)}},s.createElement("span",{style:u},n.title)),n.items?s.createElement("ul",{style:m},n.items.map((n=>s.createElement("li",{key:n.url},s.createElement(t.Link,{key:n.url,to:n.url,onMouseEnter:()=>{r(n.title)},onMouseLeave:()=>{r(!1)},style:{...d,...i===n.title?h:null}},n.title),n.items?s.createElement("ul",{style:m},n.items.map((n=>s.createElement("li",{key:n.url},s.createElement(t.Link,{key:n.url,to:n.url,onMouseEnter:()=>{r(n.title)},onMouseLeave:()=>{r(!1)},style:{...d,...i===n.title?k:null}},n.title))))):null)))):null))))))}},3306:function(n,a,e){var s=e(7294),t=e(4854);a.Z=n=>{let{tags:a}=n;const{0:e,1:o}=(0,s.useState)(!1),l={color:"#35435d",fontWeight:600,textDecoration:"none"},p={backgroundColor:"#35435d",color:"#ffffff"};return s.createElement("p",null,"Tags:"," ",a.map(((n,c)=>s.createElement("span",{key:n},s.createElement(t.Link,{key:n,to:"/tags/"+n.replace(/ /g,"-")+"/",style:{...l,...e===n?p:null},onMouseEnter:()=>{o(n)},onMouseLeave:()=>{o(!1)}},n),c===a.length-1?s.createElement(s.Fragment,null):s.createElement(s.Fragment,null,","," ")))))}},1151:function(n,a,e){e.d(a,{ah:function(){return o}});var s=e(7294);const t=s.createContext({});function o(n){const a=s.useContext(t);return s.useMemo((()=>"function"==typeof n?n(a):{...a,...n}),[a,n])}}}]);
//# sourceMappingURL=component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-users-nathanphennel-projects-code-enphnt-github-io-blog-vst-plugins-rust-index-mdx-7b711b33be128bd1be82.js.map